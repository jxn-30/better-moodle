# Better-Moodle

[![Aktuelle Version / Current Version](https://img.shields.io/github/v/release/jxn-30/better-moodle?label=Aktuellste%20Version%20/%20Current%20Version&color=004B5A&style=for-the-badge)](https://github.com/jxn-30/better-moodle/releases/latest)

-   [Installation](#installation)
-   [Disclaimer](#disclaimer)
-   [Update](#update)
    -   [Changelog](#changelog)
-   [Hochschulen](#hochschulen)
-   [Features](#features)
-   [FAQ](#faq)
-   [Alte Bilder und Impressionen](#alte-bilder-und-impressionen)
-   [Better-Moodle ohne Userscript-Manager nutzen](#better-moodle-ohne-userscript-manager-nutzen)

[//]: # 'TODO: More english translations'

Better-Moodle ist ein Userscript, um das Design vom [UzL Moodle](https://moodle.uni-luebeck.de/) zu verbessern und zusÃ¤tzliche, coole Features hinzuzufÃ¼gen.

ðŸ‡¬ðŸ‡§ Better-Moodle is an userscript to improve the design of [UzL Moodle](https://moodle.uni-luebeck.de/) and add additional, cool features.

_Bilder in dieser Beschreibung enthalten teilweise verschwommene Elemente, um den Datenschutz zu wahren._

> **ðŸ‡¬ðŸ‡§ English Version**
>
> Better-Moodle will use English translations whenever the page indicates to be in english.
>
> Within this README, English texts can be found - if available - in the extendable areas marked with `ðŸ‡¬ðŸ‡§`. They can be opened and closed by clicking on the respective area.

## Installation

1. Userscript-Manager als Browser-Erweiterung installieren (z.Â B. [Tampermonkey](https://tampermonkey.net))
2. Klicke [hier][installation], um Better-Moodle zu installieren
3. Moodle einmal neu laden und ein besseres Moodle genieÃŸen ðŸŽ‰
4. Bei Bedarf Ã¼ber das ZahnrÃ¤der-Icon oben rechts im Moodle, neben deinem Profilbild, Better-Moodle individualisieren

<details>
<summary>ðŸ‡¬ðŸ‡§ Installation</summary>

1. install an Userscript-Manager as a browser extension (e.g. [Tampermonkey](https://tampermonkey.net))
2. click [here][installation] to install Better-Moodle
3. reload Moodle once and enjoy a better Moodle ðŸŽ‰
4. if required, customize Better-Moodle via the gears icon at the top right of Moodle, next to your profile picture
 </details>

## Disclaimer

Better-Moodle wurde privat von einem Fachschaftsmitglied entwickelt und ist kein offizielles Projekt der Uni. Es dient ausschlieÃŸlich dazu, die individuelle Moodle-Nutzung zu verbessern, und sammelt keinerlei Daten. Die Nutzung geschieht natÃ¼rlich dennoch auf eigene Verantwortung! ;)

Bei der Verwendung von Userscript-Managern wie Tampermonkey wird ein externes Tool genutzt, fÃ¼r das wir nicht zustÃ¤ndig oder verantwortlich sind. Es wird zur Vorsicht bei der Installation weiterer Userscripts geraten.

<details>
<summary>ðŸ‡¬ðŸ‡§ Disclaimer</summary>

Better-Moodle was developed privately by a member of FS MaIn and is not an official project of the university. Its sole purpose is to improve the individual use of Moodle and does not collect any data. Of course, you still use it at your own risk ;)

When using userscript managers such as Tampermonkey, an external tool is used for which we are not responsible. Caution is advised when installing additional userscripts.

</details>

## Update

Die meisten Userscript-Manager suchen regelmÃ¤ÃŸig nach Aktualisierungen. Eine manuelle Aktualisierung von Better-Moodle ist auch jederzeit Ã¼ber den [Installationslink][installation] mÃ¶glich.

Wenn in den Einstellungen aktiviert, wird Better-Moodle auch einen kleinen roten Punkt neben dem Einstellungen-Icon in der Navigationsleiste anzeigen, wenn ein Update verfÃ¼gbar ist. In den Einstellungen kann, wenn ein Update verfÃ¼gbar ist, die Aktualisierung durchgefÃ¼hrt werden.

### Changelog

Better-Moodle erhÃ¤lt regelmÃ¤ÃŸig Updates. Ein vollstÃ¤ndiges Changelog ist in der Datei [CHANGELOG.md](./CHANGELOG.md) zu finden. Das Changelog ist auch Ã¼ber das Einstellungen-MenÃ¼ Ã¼ber den Button in der linken unteren Ecke der FuÃŸleiste erreichbar.

## Hochschulen

Es gibt ganz viele, ganz tolle Menschen, die gerne programmieren und so breitet sich das Better-Moodle mit der Zeit auch auf anderen Hochschulen aus. Von diesen Hochschulen ist bekannt, dass Better-Moodle von ehrenamtlichen Studis entwickelt und getestet wird:

- **Original: [UniversitÃ¤t zu LÃ¼beck (UzL)](https://github.com/jxn-30/better-moodle)** by [@jxn-30](https://github.com/jxn-30)
- [CAU Kiel](https://github.com/YorikHansen/better-moodle) by [@YorikHansen](https://github.com/YorikHansen)

## Features

Alle Features von Better-Moodle lassen sich in den Einstellungen (de-)aktivieren. Die Einstellungen sind Ã¼ber das Icon mit den ZahnrÃ¤dern in der rechten oberen Ecke neben dem Profilbild in der Navigationsleiste erreichbar.

[//]: # 'TODO: Add pictures settings-btn'

> _Dunkles Design_  
> Nein, Better-Moodle hat keinen Dark-Mode. Wir empfehlen die Verwendung der Browser-Erweiterung [Dark Reader](https://darkreader.org/).
> Beispielhaft sind auf dieser Seite Screenshots mit einem Helligkeitswert von 100Â % und einem Kontrastwert von 150Â % in Dark Reader zu sehen.

### Volle Breite

Aktuell begrenzt Moodle die Breite der Inhalte und lÃ¤sst einen groÃŸen weiÃŸen Rand. Better-Moodle entfernt diesen Rand und lÃ¤sst die Inhalte immer die volle Breite des Bildschirms nutzen.

[//]: # 'TODO: Add pictures full-width'

### Externe Links

StandardmÃ¤ÃŸig Ã¶ffnet Moodle externe Links manchmal im selben Tab. Mit dieser Einstellung werden externe Links immer in einem neuen Tab geÃ¶ffnet.

### Abgeschnittene Texte

Manche Texte, insbesondere in der Seitenleiste, sind in Moodle abgeschnitten. Seitens Moodle gibt es momentan leider keine MÃ¶glichkeit, den vollstÃ¤ndigen Text zu sehen. Diese Einstellung ermÃ¶glicht es, den vollstÃ¤ndigen Text zu lesen, wenn mit der Maus Ã¼ber den Text fÃ¤hrst und dort kurz verweilst.

### Lesezeichen-Manager

Manche Menschen nutzen den Lesezeichen-Manager ihres Browsers, um ihre Lesezeichen zu verwalten. Andere nutzen Better-Moodle, um ihre Lesezeichen zu verwalten. Better-Moodle bietet die MÃ¶glichkeit, Lesezeichen zu speichern und zu verwalten. Die Lesezeichen sind Ã¼ber das Lesezeichen-Icon in der rechten oberen Ecke der Navigationsleiste erreichbar.

[//]: # 'TODO: Add pictures bookmark-manager'

### Download unterbinden

Moodle scheint es zu lieben, Dateien runterzuladen, aber nicht jeder freut sich darÃ¼ber, wenn der eigene `Downloads`-Ordner des GerÃ¤tes zugemÃ¼llt wird, weil dasselbe Ãœbungsblatt jetzt schon zum 5. mal heruntergeladen wurde. Diese Einstellung versucht, das automatische Herunterladen von Dateien zu verhindern, das geht aber leider nicht immer, aufgrund der EinschrÃ¤nkungen von Userscripten. Die Erfahrung hat gezeigt, dass sich die Menge aber trotzdem schon deutlich reduziert.

### Event-AnkÃ¼ndigungen

Wusstest du schon, dass es an deiner Lieblings-Uni ganz tolle studentische Gremien gibt? Wir veranstalten unter anderem regelmÃ¤ÃŸig coole Events, einige wenige davon werden in der Navigationsleiste angekÃ¼ndigt. Dabei handelt es sich um grÃ¶ÃŸere Events, wie z.Â B. die beiden Adventsveranstaltungen oder das COAL.
Ja, du kannst diese AnkÃ¼ndigungen natÃ¼rlich auch ausschalten, wenn du sie nicht sehen mÃ¶chtest.

[//]: # 'TODO: Add pictures event announcements'

### Countdown bis Heiligabend

Kommt Weihnachten bei dir auch jedes Jahr so plÃ¶tzlich und unerwartet? Dann ist dieser kleine Countdown genau das richtige fÃ¼r dich, denn er erinnert dich jederzeit im Moodle in der Navigationsleiste daran, wie viele Tage es noch bis Heiligabend sind.
Teilnehmenden des Mathe-Vorkurses und manch einer "Analysis 1" Vorlesung kommt dieser Countdown sicherlich bekannt vor, denn diese Einstellung ist eine kleine Hommage an dieses Erlebnis.

[//]: # 'TODO: Add pictures christmasCountdown'

### Layout im Dashboard

Das Dashboard ist eine tolle Sache, denn dort hat man den Ãœberblick Ã¼ber anstehende Termine etc. Leider ist das Standard-Dashboard von Moodle nicht besonders flexibel und es fehlt eine Ãœbersicht Ã¼ber alle eigenen Kurse.
Mit Better-Moodle wird genau so eine "Meine Kurse"-Seitenleiste links hinzugefÃ¼gt, die alle eigenen Kurse auflistet. AuÃŸerdem werden die "Zeitleiste" und der Bereich "Aktuelle Termine" in eine rechte Seitenleiste verschoben, um mehr Platz fÃ¼r die Inhalte zu schaffen.

Es ist geplant, dass sich alle Nutzer von Better-Moodle dieses Layout selbst anpassen kÃ¶nnen, um individuell zu bestimmen, welche Features genutzt werden mÃ¶chten und wo diese zu sehen sein sollen. Aktuell sit aber das Standard-Layout fest vorgegeben.

[//]: # 'TODO: Add pictures dashboard'

### Filter der Kurse-Sidebar

StandardmÃ¤ÃŸig zeigt die "Meine Kurse"-Seitenleiste im Dashboard genau die Kurse an, die auch gerade auf der "Meine Kurse"-Seite angezeigt werden. Du kannst aber Ã¼ber diese Einstellung auch einen festen Filter auswÃ¤hlen. VerfÃ¼gbar sind genau die Filter, die auch in der "Meine Kurse"-Seite vorhanden sind.

Diese Filter-Einstellung kannst du auch Ã¼ber das Trichter-Icon in der Seitenleiste Ã¤ndern, ohne erst aufwendig die Einstellungen Ã¶ffnen zu mÃ¼ssen.

### Meine Kurse: Kacheln pro Leiste

Ist auf der "Meine Kurse"-Seite die Ansicht auf "Kacheln" gestellt, so werden von Moodle nur 3 Kacheln pro Zeile angezeigt.
Gerade in Kombination mit der Einstellung "Volle Breite", sehen die Kacheln so sehr gestreckt aus, weshalb diese Einstellung es ermÃ¶glicht, die Anzahl der Kacheln pro Zeile zu Ã¤ndern. MÃ¶glich sind Werte von 1 bis 10 (jeweils inklusive).

### "Meine Kurse"-Dropdown in der Navigationsleiste

Analog zur "Meine Kurse"-Seitenleiste im Dashboard gibt es auch eine Dropdown fÃ¼r die Navigationsleiste. Damit kannst du deine Kurse nicht nur vom Dashboard aus direkt erreichen, sondern auch von jeder anderen Seite aus.

[//]: # 'TODO: Add pictures my-courses dropdown'

#### Filter der Kurs-Dropdown

Auch hier kannst du einen Filter fÃ¼r die Kurse auswÃ¤hlen, die in der Dropdown-Liste angezeigt werden sollen. Die verfÃ¼gbaren Filter sind dieselben wie in der "Meine Kurse"-Seite. Diese Einstellung kannst du nur Ã¼ber die Einstellungen Ã¤ndern.

### Link zu Bewertungen in der Sidebar

Du mÃ¶chtest in deinen Kursen die Bewertungen Ã¶ffnen kÃ¶nnen, ohne erst aufwendig auf die Hauptseite des Kurses zu wechseln? Mit dieser Einstellung wird ein Link oben in die linke Seitenleiste in Kursen hinzugefÃ¼gt, Ã¼ber die du direkt zu den Bewertungen des jeweiligen Kurses gelangst.

[//]: # 'TODO: Add pictures bewertungen'

#### Bewertungen in neuem Tab Ã¶ffnen

Manche Menschen mÃ¶chten gerne, dass die Bewertungen standardmÃ¤ÃŸig in einem neuen Tab statt im aktuellen geÃ¶ffnet werden. Das kannst du Ã¼ber diese Einstellung erreichen.

### Seitenleiste vollstÃ¤ndig ein-/ausklappen

Manchmal mÃ¶chte man alle EintrÃ¤ge der Seitenleiste in Kursen auf einmal einklappen oder auch ausklappen. Das geht mit dieser Einstellung, indem du einfach auf eines der Symbole zum Ein- bzw. Ausklappen doppelklickst. Es werden dann alle EintrÃ¤ge der Seitenleiste entsprechend zusammengeklappt oder wieder ausgeklappt.

### BildÃ¼berlauf verhindern

Ist ein Bild sehr breit, so kann es passieren, dass es in den Seiten eines Kurses Ã¼ber den rechten Rand hinausgeht und man dann horizontal scrollen kann. Das ist nicht besonders schÃ¶n, weshalb diese Einstellung dafÃ¼r sorgt, dass Bilder nicht mehr Ã¼ber den rechten Rand hinausgehen kÃ¶nnen.

### Bilder zoomen

Kleine Bilder sind schwer zu erkennen, deshalb ermÃ¶glicht es dir diese Einstellung, Bilder in Kursinhalten per Klick heranzuzoomen, um sie besser erkennen zu kÃ¶nnen. Per Klick auf das heran gezoomte Bild kannst du es wieder auf StandardgrÃ¶ÃŸe zurÃ¼cksetzen.

### Hinweis zur Selbsteinschreibung ohne EinschreibeschlÃ¼ssel ausblenden

In manchen Kursen zeigt Moodle einen Hinweis an, dass die Selbsteinschreibung ohne EinschreibeschlÃ¼ssel aktiviert ist (nur NutzerInnen mit entsprechenden Rechten kÃ¶nnen diesen Hinweis sehen). Dieser Hinweis kann mit dieser Einstellung ausgeblendet werden.

### Mitteilungen per Tastenkombination absenden

Bist du einer der Menschen, die das "Mitteilungen"-Feature von Moodle nutzt? Man kann leider Mitteilungen im Moodle nur Ã¼ber den "Absenden"-Knopf abzusenden und nicht per Tastatur. Diese Einstellung ermÃ¶glicht es dir, per Strg+Enter oder per Shift+Enter die Mitteilung abzusenden. Welcher der beiden Hotkeys aktiviert sein soll, kannst du selbst entscheiden.

## FAQ

### XY funktioniert nicht. Was tun?

It's not a bug, it's a feature! In allen anderen FÃ¤llen kannst du einfach auf [GitHub](https://github.com/jxn-30/better-moodle/issues/new?labels=bug&template=bug.yml&title=%5BBUG%5D%3A+) ein Issue erÃ¶ffnen. Alternativ geht auch eine Mail an Jan. Die E-Mail-Adresse findest du direkt im "Hilfe zu Better-Moodle"-Bereich, welchen du Ã¼ber die Einstellungen erreichen kannst. Bitte gebe auch immer an, welche Version von Better-Moodle ihr verwendet. Diese Information kann in den Better-Moodle-Einstellungen Ã¼ber die ZahnrÃ¤der in der Navigationsleiste von Moodle gefunden werden.

### Ich habe eine tolle Idee fÃ¼r ein neues Feature

Erstelle gerne ein Issue auf [GitHub](https://github.com/jxn-30/better-moodle/issues/new?template=feature.yml&title=%5BFeature+request%5D%3A+), reiche eine Contribution ein oder schreibe eine Mail an Jan. Die E-Mail-Adresse findest du direkt im "Hilfe zu Better-Moodle"-Bereich, welchen du Ã¼ber die Einstellungen erreichen kannst.

### Ich habe plÃ¶tzlich mehrere KnÃ¶pfe zu den Better-Moodle Einstellungen. Was ist passiert?

Hoppla, da scheint wohl versehentlich Better-Moodle mehrfach installiert zu sein. Keine Sorge, das kann passieren und lÃ¤sst sich einfach beheben: Ã–ffne einfach die ScriptÃ¼bersicht deines Userscript-Managers (Bei Tampermonkey klickst du einfach auf das Tampermonkey-Icon in deinem Browser (ein schwarzes oder rotes Quadrat mit zwei LÃ¶chern drin), ggf. ist es hinter einem Puzzleteil oder einem Paket-Icon versteckt, und klickst anschlieÃŸend auf "Ãœbersicht") und lÃ¶sche einmal alle Installationen von Better-Moodle. AnschlieÃŸend kannst du die aktuellste Version von Better-Moodle einfach Ã¼ber den [Installationslink][installation] neu installieren.

### Welche Userscript-Manager funktionieren?

Prinzipiell sollten alle gÃ¤ngigen Userscript-Manager funktionieren, allerdings wurde Better-Moodle primÃ¤r mit Tampermonkey getestet.

### Kann ich Better-Moodle auch auf meinem Handy nutzen?

Jein: Unserer Kenntnis nach ist Firefox fÃ¼r Android aktuell der einzige mobile Browser, der Tampermonkey als Add-On unterstÃ¼tzt. Better-Moodle wird auch regelmÃ¤ÃŸig in der mobilen Umgebung getestet und sollte dort problemlos funktionieren.

### Was ist Tampermonkey (bzw. ein Userscript-Manager) eigentlich?

Userscript-Manager ermÃ¶glichen es, beliebige Scripte (in JavaScript geschrieben) auf Webseiten auszufÃ¼hren und diese somit anzupassen und die Anzeige im Browser zu verÃ¤ndern.

### Ist Tampermonkey nicht gefÃ¤hrlich?

Es ist potenziell mÃ¶glich, gefÃ¤hrliche Userscripte zu installieren, die Nutzerdaten abgreifen kÃ¶nnen. Userscript-Manager verbieten daher die AusfÃ¼hrung von Userscripten z.Â B. auf gÃ¤ngigen Online-Banking Seiten. Achtet bei der Installation und dem Aktualisieren von Userscripten immer darauf, dass ihr der Herkunft des Scripts vertraut. Better-Moodle ist Open-Source, das heiÃŸt, jede/r kann den Quellcode einsehen und sich somit selbst davon Ã¼berzeugen, dass Better-Moodle keinen bÃ¶sartigen Code enthÃ¤lt. AuÃŸerdem kÃ¶nnt ihr uns vertrauen ;)

## Alte Bilder und Impressionen

Aktuell Ã¼berarbeiten wir die Bilder in dieser Datei. Bis die neuen verfÃ¼gbar sind, hier noch ein paar Impressionen von Better-Moodle. Teilweise sind neue Features in diesen Bildern noch nicht vorhanden.

|                     Default Design                      |                    Userscript (Light mode)                     |                    Userscript (Dark mode)                    |
| :-----------------------------------------------------: | :------------------------------------------------------------: | :----------------------------------------------------------: |
| ![Default Design](./img/general/my_courses/default.png) | ![Userscript (Light mode)](./img/general/my_courses/light.png) | ![Userscript (Dark mode)](./img/general/my_courses/dark.png) |
|     ![Default Design](./img/dashboard/default.png)      |     ![Userscript (Light mode)](./img/dashboard/light.png)      |     ![Userscript (Dark mode)](./img/dashboard/dark.png)      |
|                                                         |  ![Userscript (Light mode)](./img/dashboard/light_closed.png)  |  ![Userscript (Dark mode)](./img/dashboard/dark_closed.png)  |
|     ![Default Design](./img/my_courses/default.png)     |     ![Userscript (Light mode)](./img/my_courses/light.png)     |     ![Userscript (Dark mode)](./img/my_courses/dark.png)     |

## Better-Moodle ohne Userscript-Manager nutzen

Better-Moodle ist darauf ausgelegt, mit einem Userscript-Manager genutzt zu werden, da es von Userscript-Managern bereitgestellte Funktionen und Informationen nutzt, die zum Beispiel dafÃ¼r da sind, Style zu Ã¤ndern oder Einstellungen zu speichern.

MÃ¶chte man Better-Moodle ohne einen Userscript-Manager nutzen, so muss mann diese Funktionen und Objekte Ã¼berschreiben. Es wurde bewusst die Entscheidung getroffen, diese nicht in Better-Moodle selbst zu implementieren, sondern stattdessen hier sogenannte Workarounds zu verÃ¶ffentlichen. Die Code-Snippets kÃ¶nnen einfach verwendet werden und sollten vor dem Code von Better-Moodle eingefÃ¼gt werden.

Wie man den Code von Better-Moodle am liebsten in das Moodle injiziert bleibt dem Anwender in diesem Fall selbst Ã¼berlassen.

### Workaround fÃ¼r `GM_addStyle`

```js
this.GM_addStyle ??= style => {
    const styleEl = document.createElement('style');
    styleEl.textContent = style;
    document.head.append(styleEl);
};
```

### Workaround fÃ¼r `GM_getValue`, `GM_setValue` und `GM_listValues`

```js
this.GM_getValue ??= (key, defaultValue) =>
    JSON.parse(localStorage.getItem(key) ?? JSON.stringify(defaultValue));

this.GM_setValue ??= (key, value) =>
    localStorage.setItem(key, JSON.stringify(value));

this.GM_listValues ??= () => Object.keys(localStorage);
```

### Workaround fÃ¼r `GM_addValueChangeListener` und `GM_removeValueChangeListener`

```js
this.GM_addValueChangeListener ??= (key, callback) => {
    this.listeners ??= [];
    const listener = ({ oldValue, newValue }) =>
        callback(key, oldValue, newValue, false);
    this.listeners.push(listener);
    window.addEventListener('storage', listener);
    return this.listeners.length;
};

this.GM_removeValueChangeListener ??= id => {
    window.removeEventListener('storage', this.listeners[id - 1]);
    this.listeners[id - 1] = null;
};
```

### Workaround fÃ¼r `GM_info`

Dies beinhaltet die Informationen, die Better-Moodle in Version `1.21.0` nutzt. Es kann sein, dass in zukÃ¼nftigen Versionen weitere Informationen hinzukommen.

```js
this.GM_info ??= {
    script: {
        version: '1.21.0',
        updateUrl:
            'https://github.com/jxn-30/better-moodle/raw/main/redesign.user.js',
    },
};
```

[installation]: https://github.com/jxn-30/better-moodle/raw/main/redesign.user.js
